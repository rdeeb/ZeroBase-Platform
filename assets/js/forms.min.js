!function(a){a(document).ready(function(){a(".map-selector").each(function(b,c){function d(a){var b=a.split(",");return new google.maps.LatLng(parseFloat(b[0]),parseFloat(b[1]))}var e={center:new google.maps.LatLng(maps_config.latitude,maps_config.longitude),zoom:13};""!==a(c).find(".gmap-latlong").val()&&(e.center=d(a(c).find(".gmap-latlong").val()));var f=a(c).find(".map-canvas"),g=new google.maps.Map(f[0],e),h=new google.maps.Marker({position:g.getCenter(),map:g,title:form_trans.map.click_to_zoom});google.maps.event.addListener(g,"click",function(b){window.setTimeout(function(){h.setPosition(b.latLng),a(c).find(".gmap-latlong").val(b.latLng)},100)})})}),a(document).on("uk.tab.change",function(b,c){window.setTimeout(function(){a(".map-selector").css("width","99%"),google.maps.event.trigger(map,"resize")},10),window.setTimeout(function(){a(".map-selector").css("width","100%"),google.maps.event.trigger(map,"resize"),map.center(getLatLngFromString(a(c).find(".gmap-latlong").val()))},50)})}(jQuery),function(a){var b=function(b,c){var d=b.state().get("selection").first().toJSON();a(c).siblings('input[type="hidden"]').val(d.id),a(c).parent().find(".preview").remove(),a(c).hasClass("image_selector")?a(c).parent().append(a('<img src="'+d.url+'" width="60" class="img preview" />')):a(c).parent().append(a('<div class="doc preview" />')),0===a(c).parent().find(".delete").length&&a(c).parent().append(a(' <button class="button delete submitdelete">Remove File</button>'))},c=function(b){var c="";return a(b).siblings(".gallery-preview").find(".image").each(function(){var b=a(this).attr("data-attachment_id");c=c+b+","}),c};a(document).ready(function(){a(".uploader, .image_selector").each(function(c,d){a(d).parent(".form-field, .form_row").delegate(".delete","click",function(b){b.preventDefault(),a(d).siblings('input[type="hidden"]').val(""),a(d).siblings(".preview").remove(),a(this).remove()}),a(d).click(function(c){var e;if(c.preventDefault(),e)return void e.open();var f={title:forms_trans.file_title,button:{text:forms_trans.file_submit},multiple:!1};a(d).hasClass("image_selector")&&(f.title=forms_trans.image_title,f.button={text:forms_trans.image_submit},f.library={type:"image"}),e=wp.media.frames.file_frame=wp.media(f),e.on("select",function(){b(e,d)}),e.on("open",function(){var b=e.state().get("selection"),c=a(d).siblings('input[type="hidden"]').val().split(",");c.forEach(function(a){var c=wp.media.attachment(a);c.fetch(),b.add(c?[c]:[])})}),e.open()})}),a(".gallery").each(function(b,d){var e=a(d).siblings(".gallery-preview");e.css("cursor","default"),a(d).closest(".form-field, .form_row").delegate(".delete","click",function(b){return b.preventDefault(),a(this).closest("li.image").remove(),a(d).siblings('input[type="hidden"]').val(c(d)),!1}),a(d).click(function(b){var f;return b.preventDefault(),f?void f.open():(f=wp.media.frames.file_frame=wp.media({title:forms_trans.gallery_title,button:{text:forms_trans.gallery_submit},library:{type:"image"},multiple:!0}),f.on("select",function(){var b=f.state().get("selection");e.html(""),b.map(function(b){b=b.toJSON(),b.id&&e.append('<li class="image" data-attachment_id="'+b.id+'"><img src="'+b.url+'" /> <a href="#" class="delete">Delete</a></li>'),a(d).siblings('input[type="hidden"]').val(c(d))})}),f.on("open",function(){var b=f.state().get("selection"),c=a(d).siblings('input[type="hidden"]').val().split(",");c.forEach(function(a){var c=wp.media.attachment(a);c.fetch(),b.add(c?[c]:[])})}),void f.open())}),a(d).siblings(".gallery-preview").sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"metabox-sortable-placeholder",start:function(a,b){b.item.css("background-color","#f6f6f6")},stop:function(a,b){b.item.removeAttr("style")},update:function(){a(d).siblings('input[type="hidden"]').val(c(d))}})})})}(jQuery),function(a){a(document).ready(function(){a(".datepicker").datepicker(),a(".colorselector").each(function(b,c){a(c).css("background",a(c).val()),a(c).ColorPicker({color:a(c).val(),livePreview:!0,onSubmit:function(b,c,d,e){a(e).val("#"+c),a(e).ColorPickerHide()},onChange:function(b,d){b.b<40?a(c).css("color","#fff"):a(c).css("color","#000"),a(c).css("background","#"+d),a(c).val("#"+d.toUpperCase())}})})})}(jQuery);